<ContentTable>
  <div id="contentTable">
    <table>
      <tr>
        <th></th>
        <th>Play</th>
        <th>Text</th>
        <th>t0</th>
        <th>t1</th>
        <th>d</th>
      </tr>
      <tr each={phrase, phraseNum in Phrases.get()} if={phraseNum > 0} class={active : currentPhraseNum == phraseNum} >
        <td class="num-in-table">{phraseNum}</td>
        <td class="play-in-table" onclick={playInTable}>&nbsp;</td>
        <td class="table-phrase"><input name="text" oninput={onEditText} value={phrase.text} ></input></td>
        <td class="table-timing"><input name="timingStart" type="number" step=0.1 value={phrase.timingStart} oninput={onEditTimingStart}></input></td>
        <td class="table-timing"><input name="timingEnd" type="number" step=0.1 value={phrase.timingEnd} oninput={onEditTimingEnd}></input></td>
        <td>{(phrase.timingEnd-phrase.timingStart).toFixed(2)}</td>
      </tr>
    </table>
  </div>

  <script>
    var tag = this

    tag.playInTable = function(event) {
      Media.playPhrase(event.item.phraseNum)
    }

    tag.onEditText = function(event) {
      Phrases.updatePhrase(event.item.phraseNum,{"text": this.text.value })
    }

    tag.onEditTimingStart = function(event) {
      Phrases.updatePhrase(event.item.phraseNum,{"timingStart": this.timingStart.value })
      Media.playPhrase(event.item.phraseNum)
    }

    tag.onEditTimingEnd = function(event) {
      Phrases.updatePhrase(event.item.phraseNum,{"timingEnd": this.timingEnd.value })
    }

    Phrases.on('updated', function() {
      tag.update()
    })

    Phrases.on("currentPhraseChanged", function(phraseNum){
        tag.currentPhraseNum = phraseNum
        tag.update()
        
      })

  </script>


</ContentTable>
