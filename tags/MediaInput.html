<MediaInput>
  <h3>Media Link: </h3>
  <form>
    <input placeholder="URL to media" name="link" oninput={readLink}></input><br />
    <div id="mediaContainer"></div>
    <div name="mediaType">{mediaType}</div>

    <audio if={ mediaType=="audio"} name="audioElement" controls=1 src={this.link.value} ontimeupdate={timeUpdate} ></audio><br />
    <video if={ mediaType=="video"} name="videoElement" controls=1 src={this.link.value} ontimeupdate={timeUpdate} ></video><br />
    <div id="playerControls">
      <button id="prevButton" class="playerNav" onclick={prevClicked}>Prev</button>
      <button id="repeatButton" class="playerNav" onclick={repeatClicked}>Repeat</button>
      <button id="nextButton" class="playerNav" onclick={nextClicked}>Next</button>
    </div>
    <div id="subtitles">
      <div id="subs-in-lang-1">{subs}</div>
    </div>
    <div id="currentTime">{ct}</div>
    <button onclick={setTiming}>Add time interval</button>
  </form>

  <script>
    var tag = this
    tag.mediaType = ""
    tag.currentPhrase = 1

    tag.readLink = function() {
      //tag.media = tag.root.querySelector("#media")

      tag.mediaType = Media.type(tag.link.value)
      Media.setMedia(tag[tag.mediaType+"Element"])
    }

    tag.timeUpdate = function() {
      tag.ct = Media.getCurrentTime().toFixed(2)
    }

    tag.setTiming = function() {
      var i = Phrases.length()-1
      Phrases.push({word0: 0, word1:0, timingStart:  Phrases.getPhrase(i).timingEnd, timingEnd: tag.ct, text: ""})
      //console.log("i: ", i, "")
    }

    tag.nextClicked = function(){
      var cf = Phrases.getCurrentPhraseNum()
      Media.playPhrase(cf+1)
    }

    tag.prevClicked = function(){
      var cf = Phrases.getCurrentPhraseNum()
      Media.playPhrase(cf-1)
    }

    tag.repeatClicked = function(){
      var cf = Phrases.getCurrentPhraseNum()
      Media.playPhrase(cf)
    }

    Phrases.on("current_phrase_changed", function(phraseNum){
        tag.update()

      })

  </script>


</MediaInput>
